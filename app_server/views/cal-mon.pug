extends layout

block content
  div(class='modal fade', id="postModal", tabindex="-1", role="dialog", aria-labelledby="exampleModalLabel" aria-hidden="true")
    div(class="modal-dialog modal-lg", role="document")
      div(class="modal-content")
        .row(style={margin:'0',padding:"10px 10px"}).banner
          .col-12
            h5.float-right (Esc to exit)
            h1 Form for Adding a Single Activity
        .row(style={margin:'0',padding:"10px 10px"})
          .col-12
            form(action=`/api/years/${year}/${fortnight}/intent`, method="post", role="form")
              .form-group.row
                label.col-2.col-form-label(for="pomGroup") Activity Type
                .col-4
                  select#pomGroup.form-control.input-sm(name="pomGroup")
                    option(value="blank") Select a Type
                    option Intended Physical Activity
                    option Intended General Activity
                    option Expected Routine Activity
              .form-group.row
                label.col-2.col-form-label(for="pomCode") Activity Code
                .col-4
                  select#pomCode.form-control.input-sm(name="pomCode")
                    option Select a Type to show Activities
                label.col-2.col-form-label(for="pomName") Name
                .col-4
                  input#pomName.form-control(name="pomName")

              .form-group.row
                label.col-2.col-form-label(for="pomBegin") Begin
                .col-4
                  input#pomBegin(type="datetime-local" name="pomBegin").form-control
                label.col-2.col-form-label(for="pomEnd") End
                .col-4
                  input#pomEnd(type="datetime-local" name="pomEnd").form-control
                  input#pomQd(type="hidden" name='pomQd').form-control
                
              .form-group.row
                .col-10
                .col-2
                  input#pomAdd(type="submit" name="pomAdd" value="Add Activity").float-right
  
  div(class='modal fade', id="getModal", tabindex="-1", role="dialog", aria-labelledby="exampleModalLabel" aria-hidden="true")
    div(class="modal-dialog modal-lg", role="document")
      div(class="modal-content")
        .row(style={margin:'0',padding:"10px 10px"}).banner
          .col-12
            h5.float-right (Esc to exit)
            h1 Intended Activity Info
        .row(style={margin:'0',padding:"10px 10px"})
          .col-12
            form(action=`/api/years/${year}/${fortnight}/intent?_method=PUT`, method="POST", role="form")
              .row
                .col-2 Activity Type
                .col-4#gmGroup InnerHTML(Type)
              .row
                .col-2 Activity Name
                .col-4#gmName InnerHTML(Name)
                .col-2 Activity Code
                .col-2#gmCode InnerHTML(Code)
                .col-2 

              .row
              br
              .form-group.row
                label.col-2.col-form-label(for="gmBegin") Begin 
                .col-4
                  input#gmBegin(type="datetime-local" name="gmBegin").form-control
                label.col-2.col-form-label(for="gmEnd") End 
                .col-4
                  input#gmEnd(type="datetime-local" name="gmEnd").form-control
                  input#gmId(type="hidden" name='gmId').form-control
              .form-group.row
                .col-2 Delete
                  a#gmDEL.btn.btn-primary.float-right &#128465
                .col-2 Update
                  a#gmPUT.btn.btn-submit.float-right &#128260
                .col-2
                .col-6
                  input.btn.btn-submit.float-right#gmAdd(style={width:'100%',height:'100%'},type="submit" name="gmAdd" value="Update Activity Duration")
              //- .form-group.row
              //-   .col-12
              //-     a#gmDEL.btn.btn-primary.float-right &#128465
        .row(style={margin:'0',padding:"0 0"}).banner
        .row(style={margin:'0',padding:"10px 10px"}).banner
        .row(style={margin:'0',padding:"10px 10px"}).banner
          .col-12
            h1 Adhered Activity Info
          .card
            p Person Carried Out Physical Activity 
            p Intended Physical Activity Period was 90% adhered 
            p Intended Physical Activity Duration was 110% adhered 
        .row(style={margin:'0',padding:"10px 10px"})
        .row(style={margin:'0',padding:"10px 10px"})#extraPost



                  

  div(class='modal fade', id="activeTimesPutModal", tabindex="-1", role="dialog", aria-labelledby="exampleModalLabel" aria-hidden="true")
    div(class="modal-dialog modal-lg", role="document")
      div(class="modal-content")
        .row(style={margin:'0',padding:"10px 10px"}).banner
          .col-12
            h5.float-right (Esc to exit)
            h1 Change Active Times (Overflowing Activities will be preserved)
        .row(style={margin:'0',padding:"10px 10px"})
          .col-12
            form(action=`/api/years/${year}/${fortnight}/intent`, method="post", role="form")
              .form-group.row
                label.col-2.col-form-label(for="pomBegin") Begin
                .col-4
                  input#pomBegin(type="datetime-local" name="pomBegin").form-control
                label.col-2.col-form-label(for="pomEnd") End
                .col-4
                  input#pomEnd(type="datetime-local" name="pomEnd").form-control
              

  .row.banner
    .col-12
      h1 #{fortnight}th Fortnight of 2029 Calendar
      h3  
        small &nbsp;Fit user activities around the perception of their fatigue based on discussion and validations of their based opinions.
  .row
    .col-md-6
      .card.card-primary(style={opacity:0.5})
          .card-block
            h2.card-title#rulid Toggle Rule Header if Desired
            .card-header
              p.lead Rule inference for adherentWhoAdherence, with ont-ised citation and rule inference for other requirements using verified API
              p  
                br
                | shP2hasType[?P,?adherentWhoAdherence]:- 
                br
                | &emsp; sh:E21Person[?P],
                br 
                | &emsp; sh:FW44PhysicalActivity[?PA],
                br 
                | &emsp; sh:FW41CarriedOutBy[?PA,?P], ...
          button(type="button" onClick="jbutton()") jbutton
            script(src='/javascripts/jquery.js')

  .row  
    .col-12.col-md-6
      p.rating
          i.fas.fa-star
          i.fas.fa-star
          i.fas.fa-star
          i.far.fa-star
          i.far.fa-star
      p Current Adherence over 4 Fortnights is : Adherent
  
  .row
    .col-12
      .card.card-primary
        .card-body
          h2 Calendar / Timeslots 
        .card-block.card-body 
          p Show the named times of day as columns with rows of specific periods. Hovering over the periods shows the allocation and a "change" button, clicking on them could expose a sidebar or header with citations.
          br
          table
            tbody 
              tr 
                td
                  input(type="datetime-local", name="")
                td
                  a.btn.btn-primary.float-right(href=`/years/${year}/${fortnight}/activity-form`) Schedule a single activity Form
                td 
                  button.btn.btn-primary.float-right('data-toggle'='modal', 'data-target'='#postModal') Schedule a single activity Modal      
          
        .card-block.card-header
          .row
            .col-2
              .card-body.card-header(style={'text-align':'center',padding:'2px 0','margin':'0px 0.5px'})
                  p.card-header Day
              -for(let d=1;d<=days.length;d++)
                .card-body.card-header(style={'text-align':'center',padding:'1.9px 0','margin':'0 1px'})
                  .card-header(style={'margin':'0px 1px 0px 1px'}) 
                    - let dD = new Date(days[d-1].date)
                    - let dno = dD.getDay(); let diso10 = dD.toISOString().slice(0,10);
                      p #{diso10}
            .col-10
              .sticky-xhead-ymarg-scroll-window
                .ca-days-hours-table(style={'padding-left':'15px'})
                  .row
                    - for(let i=0;i<12;i++)
                      .card-body.card-header.col-1(style={'text-align':'center',padding:'0'})
                        .row(style={'margin':'0'})
                          - let l='';let r='';
                          - if(i<5){ l = `0${i*2}:00`; r = `0${i*2+1}:00`; }
                          - if(i>4){ l = `${i*2}:00`; r = `${i*2+1}:00`; }
                            .col-6(style={padding:'0'})
                              p.card-header(style={'margin':'0px 1px'}) #{l}
                            .col-6(style={padding:'0'})
                              p.card-header(style={'margin':'0px 1px'}) #{r}
                  - for(let d=1;d<=days.length;d++)
                    .row(style={height:'34.9px','margin-bottom':'0'})
                      - for(let g=0;g<12;g++)
                        .card-body.card-header.col-1(style={'text-align':'center',padding:'2px 0'})
                          .row(style={padding:'0','margin':'0'})
                            - for(let h=0;h<=1;h++)
                              .col-3(style={padding:'0',margin:'0'})
                                .card-header.winelch(id=`c${d}d${g*2+h}h00m`, style={height:'30px','margin':'0px 0.5px',padding:'2px 0'})
                                  span(class="iaBarSpan")
                                  a(class="winel", id=`${d}d${g*2+h}h00m`, style={opacity:'20%',padding:'0',margin:'0',cursor:'cell'},'data-toggle'='modal', 'data-target'='#postModal') &#10133
                                  span(class="aaBarSpan")
                              .col-3(style={padding:'0',margin:'0',height:'30px'})
                                .card-header.winelch(id=`c${d}d${g*2+h}h30m`, style={height:'30px','margin':'0px 0.5px',padding:'2px 0'}) 
                                  span(class="iaBarSpan")
                                  a(class="winel", id=`${d}d${g*2+h}h30m`, style={opacity:'20%',padding:'0',margin:'0',cursor:'cell'},'data-toggle'='modal', 'data-target'='#postModal') &#10133
                                  span(class="aaBarSpan")
          .row 
            .card-body
              .col-2
                .card-header
                  .output 

          script.
            console.log("inline script.:");
            console.log(window.location.pathname);
          script(src="/javascripts/calmon-jquery.js")
            


  .row
    .col-12.col-md-9
      .card.card-primary.review-card
        .card-block
          a.btn.btn-primary.float-right(href='/location/review/new') Add review
          h2.card-title Comments Generated from previous 3 or 4 weeks
          .row.review
            .col-12.no-gutters.review-header
              span.rating
                i.fas.fa-star
                i.fas.fa-star
                i.fas.fa-star
                i.far.fa-star
                i(style={color: 'red'}).far.fa-star
              span.reviewAuthor &nbsp;&nbsp; Fatigue change
              small.reviewTimestamp.float-right  16 February 2017
            .col-12
              p Fatigue went from 2 to 1, maintain rest frequency, vm will likely raise fatigue to 2, increase tea/hydration/hot chocolate. trial admin, group admin and accepted aid/care users can push SLEEP EMOJI here
          .row.review
            .col-12.no-gutters.review-header
              span.rating
                i.fas.fa-star
                i.fas.fa-star
                i.fas.fa-star
                i.far.fa-star
                i.far.fa-star
              span.reviewAuthor &nbsp;&nbsp; FOOD REQUEST
              small.reviewTimestamp.float-right 14 February 2017
            .col-12
              p FOOD diary can post food emojis here. FOOD REQUESTS can also be made.
    .col-12.col-md-3
      .card.card-primary
        .card-body
          h2.card-title Active Times             
        .card-header
          p.card-text Early AM Begin: 
            span.float-right 5:00am
          p.card-text Late PM End : 
            span.float-right 9:30pm

        .card-body.a.btn.btn-primary(href='/location/review/new') Change Your Active Times
      .card.card-primary
        .card-block
          h2.card-title Modes
          .card-header
            span.badge.badge-warning
              i.fa.fa-check
              | &nbsp;InhibitoryControl:2
            | &nbsp;
            span.badge.badge-warning
              i.fa.fa-check
              | &nbsp;Fatigue:1
            | &nbsp;
            span.badge.badge-warning
              i.fa.fa-check
              | &nbsp;PriorityPA:MM
            | &nbsp;


